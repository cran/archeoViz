<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>archeoViz Vignette</title>


<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">archeoViz Vignette</h1>



<p><code>archeoViz</code> is a packaged R Shiny application for the <em>visualisation</em>, <em>exploration</em>, and web <em>communication</em> of archaeological excavation data. It includes interactive 3D and 2D <em>visualisations</em>, can generate <em>cross sections</em> and <em>map</em> of the remains, can run basic <em>spatial statistics</em> methods (convex hull, regression surfaces, 2D kernel density estimation), and display an interactive <em>timeline</em> of an excavation. <code>archeoViz</code> can be used locally or deployed on a server, either by allowing the user to load data through the interface or by running the app with a specific data set. The app interface is available in English, French, Italian, and Portuguese.</p>
<ul>
<li><a href="#installation"><strong>Installation</strong></a>
<ul>
<li><a href="#local-use">Local use</a></li>
<li><a href="#deployed-use">Deployed use</a></li>
<li><a href="#demonstration">Demonstration</a></li>
</ul></li>
<li><a href="#community-guidelines"><strong>Community guidelines</strong></a>
<ul>
<li><a href="#reporting-bugs">Reporting bugs</a></li>
<li><a href="#suggesting-changes">Suggesting changes</a></li>
</ul></li>
<li><a href="#use"><strong>Use</strong></a>
<ul>
<li><a href="#data-input">Data input</a>
<ul>
<li><a href="#loading-files-through-the-input-data-tab">Loading files through the Input data tab</a></li>
<li><a href="#random-data">Random data</a></li>
<li><a href="#through-function-parameters">Through function parameters</a></li>
</ul></li>
<li><a href="#data-sub-setting">Data sub-setting</a>
<ul>
<li><a href="#location-mode">Location mode</a></li>
<li><a href="#objects-category">Objects category</a></li>
<li><a href="#data-subgroups">Data subgroups</a><br />
</li>
<li><a href="#objects-selection">Objects selection</a></li>
</ul></li>
<li><a href="#interactive-visualisation">Interactive visualisation</a></li>
<li><a href="#graphical-outputs">Graphical outputs</a></li>
<li><a href="#spatial-statistics">Spatial statistics</a>
<ul>
<li><a href="#regression-surfaces">Regression surfaces</a></li>
<li><a href="#convex-hulls">Convex hulls</a></li>
<li><a href="#2d-kernel-density">2D kernel density</a></li>
</ul></li>
</ul></li>
<li><a href="#reproducibility"><strong>Reproducibility</strong></a></li>
<li><a href="#advanced-parameters"><strong>Advanced parameters</strong></a>
<ul>
<li><a href="#square-grid">Square grid</a></li>
<li><a href="#parameters-presetting">Parameters presetting</a></li>
<li><a href="#reactive-plot-display">Reactive plot display</a></li>
</ul></li>
<li><a href="#acknowledgment"><strong>Acknowledgment</strong></a></li>
<li><a href="#references"><strong>References</strong></a></li>
</ul>
<div id="installation" class="section level1">
<h1>Installation</h1>
<p><code>archeoViz</code> can be used in two ways:</p>
<ul>
<li>locally, on the user’s machine</li>
<li>remotely, after deploying the app on a distant server</li>
</ul>
<div id="local-use" class="section level2">
<h2>Local use</h2>
<p>The package can be installed from CRAN with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">&quot;archeoViz&quot;</span>)</a></code></pre></div>
<p>The development version is available on <em>GitHub</em> and can be installed with:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># install.packages(&quot;devtools&quot;)</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;sebastien-plutniak/archeoviz&quot;</span>)</a></code></pre></div>
<p>Then, load the package and launch the app with:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">library</span>(archeoViz)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw">archeoViz</span>()</a></code></pre></div>
</div>
<div id="deployed-use" class="section level2">
<h2>Deployed use</h2>
<p>To deploy <code>archeoViz</code> on your Shiny server, first download and unzip the package:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co"># set the working directory on your shiny server:</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="kw">setwd</span>(<span class="dt">dir =</span> <span class="st">&quot;/some/path/&quot;</span>)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co"># download the package:</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="kw">download.file</span>(</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">  <span class="dt">url =</span> <span class="st">&quot;https://github.com/sebastien-plutniak/archeoviz/archive/master.zip&quot;</span>,</a>
<a class="sourceLine" id="cb4-6" data-line-number="6">  <span class="dt">destfile =</span> <span class="st">&quot;archeoviz.zip&quot;</span>)</a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co"># unzip it:</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="kw">unzip</span>(<span class="dt">zipfile =</span> <span class="st">&quot;archeoviz.zip&quot;</span>)</a></code></pre></div>
<p>Then, go to <code>https://&lt;your-shiny-server&gt;/archeoviz-main</code>.</p>
<p>To set the app with your data and preferences, edit the app.R file, located at the root of the directory:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">archeoViz</span>(<span class="dt">objects.df =</span> <span class="ot">NULL</span>,   <span class="co"># data.frame with data about the objects</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">          <span class="dt">refits.df =</span> <span class="ot">NULL</span>,    <span class="co"># optional data.frame for refitting data</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3">          <span class="dt">timeline.df =</span> <span class="ot">NULL</span>,  <span class="co"># optional data.frame for the excavation timeline</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4">          <span class="dt">title =</span> <span class="ot">NULL</span>,        <span class="co"># title of the site / data set</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5">          <span class="dt">home.text =</span> <span class="ot">NULL</span>,    <span class="co"># html content to display on the home page</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6">          <span class="dt">lang =</span> <span class="st">&quot;en&quot;</span>          <span class="co"># interface language (&quot;en&quot;: English, &quot;fr&quot;: French, &quot;it&quot;: Italian, &quot;pt&quot;: Portuguese)</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7">          <span class="dt">set.theme =</span> <span class="st">&quot;cosmo&quot;</span>) <span class="co"># graphic theme for the Shiny interface</span></a></code></pre></div>
<p>The possible values for the <code>set.theme</code> parameter are illustrated on <a href="https://rstudio.github.io/shinythemes/">this page</a>. The language of the application can be set with the <code>lang</code> parameter.</p>
</div>
<div id="demonstration" class="section level2">
<h2>Demonstration</h2>
<p>Demonstration instances of the application are deployed on the <em>Huma Num</em> Shiny server:</p>
<ul>
<li><a href="https://analytics.huma-num.fr/archeoviz/en"><code>archeoViz</code> in English</a>.</li>
<li><a href="https://analytics.huma-num.fr/archeoviz/fr"><code>archeoViz</code> in French</a>.</li>
<li><a href="https://analytics.huma-num.fr/archeoviz/it"><code>archeoViz</code> in Italian</a>.</li>
<li><a href="https://analytics.huma-num.fr/archeoviz/pt"><code>archeoViz</code> in Portuguese</a>.</li>
</ul>
<p>Real use cases are presented on the <a href="https://analytics.huma-num.fr/archeoviz/home"><em>archeoViz Portal</em></a>.</p>
</div>
</div>
<div id="community-guidelines" class="section level1">
<h1>Community guidelines</h1>
<div id="reporting-bugs" class="section level2">
<h2>Reporting bugs</h2>
<p>If you encounter a bug, please fill an <a href="https://github.com/sebastien-plutniak/archeoviz/issues">issue</a> with all the details needed to reproduce it.</p>
</div>
<div id="suggesting-changes" class="section level2">
<h2>Suggesting changes</h2>
<p>Suggestions of changes to <code>archeoViz</code> are welcome. These requests may concern additional functions, changes to documentation, additional examples, new features, etc. They can be made by filling an <a href="https://github.com/sebastien-plutniak/archeoviz/issues">issue</a> and, even better, using pull requests and the <a href="https://docs.github.com/articles/about-pull-requests">GitHub Fork and Pull model</a>.</p>
</div>
</div>
<div id="use" class="section level1">
<h1>Use</h1>
<p>Having archaeological remains from a given site, <code>archeoViz</code> is designed to lower the technical barriers to fulfil three objectives:</p>
<ul>
<li>basic spatial exploration and generation of simple graphical reports;</li>
<li>fast pre-publication of archaeological data, intended for the scientific community;</li>
<li>fast deployment of a display and communication tool intended for a broader audience.</li>
</ul>
<p>N.B.: consequently, <code>archeoViz</code> is not intended to replace more sophisticated analysis tools (e.g., GIS, statistical packages, etc.)</p>
<div id="data-input" class="section level2">
<h2>Data input</h2>
<p>There are three ways to input data in <code>archeoViz</code>:</p>
<ol style="list-style-type: decimal">
<li>uploading tables in the “Input data” tab,</li>
<li>using randomly generated data from the “Input data” tab;</li>
<li>set the <code>archeoViz</code> main function’s parameters before running the application.</li>
</ol>
<div id="loading-files-through-the-input-data-tab" class="section level3">
<h3>Loading files through the Input data tab</h3>
<p>Tables for three types of data can be uploaded from the “Input data” tab:</p>
<ul>
<li>an “objects” table (mandatory), with data about the objects;</li>
<li>a “refits” table (optional), with data about the refitting objects;</li>
<li>a “timeline” table (optional), with data about when each square of the site was excavated.</li>
</ul>
<p>The tables must be .csv files with the first row used containing the columns’ labels (the separator can be set). Contents in html are allowed. This makes possible, in particular, to add links to external resources (e.g., the permanent identifier of the object’s in other databases, or of the concepts used to describe the object, etc.).</p>
<div id="objects-table" class="section level4">
<h4>Objects table</h4>
<p>A row describes a single object with the following mandatory fields:</p>
<ul>
<li><strong>id</strong>: <em>alphanumerical value</em>, unique identifier of the object</li>
<li><strong>xmin</strong>: <em>numerical value</em>, coordinate of the object on the X axis (in cm)</li>
<li><strong>ymin</strong>: <em>numerical value</em>, coordinate of the object on the Y axis (in cm)</li>
<li><strong>zmin</strong>: <em>numerical value</em>, coordinate of the object on the Z axis (positive depth value in cm)</li>
<li><strong>layer</strong>: <em>alphanumerical value</em>, identifier of the object’s layer</li>
<li><strong>object_type</strong>: <em>alphanumerical value</em>, category of the object</li>
</ul>
<p>In addition, optional fields are possible, including:</p>
<ul>
<li><strong>square_x</strong>: <em>alphanumerical value</em>, identifier of the square on the X axis</li>
<li><strong>square_y</strong>: <em>alphanumerical value</em>, identifier of the square on the Y axis</li>
<li><strong>year</strong> : <em>numerical value</em>, year when the object was excavated</li>
<li><strong>xmax</strong>: <em>numerical value</em>, when the X location of the object is included in a range of X coordinates</li>
<li><strong>ymax</strong>: <em>numerical value</em>, when the Y location of the object is included in a range of Y coordinates</li>
<li><strong>zmax</strong>: <em>numerical value</em>, when the Z location of the object is included in a range of Z coordinates</li>
<li><strong>object_edit</strong>: unlimited number of additional variable describing the object (field names must start with <code>object_</code> and have different suffixes)</li>
</ul>
<p>The labels of the squares of the grid:</p>
<ul>
<li>are ordered alpha-numerically;</li>
<li>are not displayed, in order to avoid erroneous displays, if the number of labels does not correspond exactly to the total number of 100 cm squares that can be defined in the range of minimum and maximum coordinates contained in the xmin and ymin variables;</li>
<li>can be completed with the <code>add.x.square.labels</code> and <code>add.y.square.labels</code> parameters of the <code>archeoViz()</code> function in order to add the missing labels (on the X and Y axes of the grid, respectively).</li>
</ul>
</div>
</div>
<div id="random-data" class="section level3">
<h3>Random data</h3>
<p>For demonstration purposes using randomly generated data is made possible. To activate this feature, set the slider in “Input data” to a value higher than 0 (setting the value back to 0 deactivates the feature). An “objects” data set, a “refits” data set, and a “timeline” data set are generated, making it possible to test all the <code>archeoViz</code> functionalities.</p>
</div>
<div id="through-function-parameters" class="section level3">
<h3>Through function parameters</h3>
<p><code>archeoViz</code>’s launching function (<code>archeoViz()</code>) can be run without parameter</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">archeoViz</span>()</a></code></pre></div>
<p>or by using the <code>objects.df</code>, <code>refits.df</code>, or <code>timeline.df</code> parameters to input data.frames about the archaeological objects, refitting relationships between these objects, and the chronology of the excavation, respectively.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw">archeoViz</span>(<span class="dt">objects.df =</span> <span class="ot">NULL</span>,  <span class="co"># data.frame with data about the objects</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">          <span class="dt">refits.df =</span> <span class="ot">NULL</span>,   <span class="co"># data.frame for refitting objects</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3">          <span class="dt">timeline.df =</span> <span class="ot">NULL</span>) <span class="co"># optional data.frame for the excavation timeline</span></a></code></pre></div>
</div>
</div>
<div id="data-sub-setting" class="section level2">
<h2>Data sub-setting</h2>
<p>Once data are loaded, a sub-selection of the data set can be done in the left side menu. Several parameters are possible: the type of location recording, the category of the objects, and the way to group the data.</p>
<div id="location-mode" class="section level3">
<h3>Location mode</h3>
<p>The location of archaeological objects can be recorded in different ways, depending on the precision of the data: as points (xyz coordinates), on lines, plans, or within a volume (ranges of x, y, and z values). In <code>archeoViz</code>, a distinction is made between exact locations (points) and the other types of fuzzy location methods (lines, plans, volumes). The radio buttons allow selecting these options.</p>
</div>
<div id="objects-category" class="section level3">
<h3>Objects category</h3>
<p>Sub-sets can be defined by object categories, using the “variable” and “values” fields. Once one of the “object_type” (or other possible “object_” variables) is selected, its values appear below and can be selected using the tick boxes. The selection must be validated by clicking on the “Validate” button. This selection determines the data that will be displayed in the plots and tables.</p>
</div>
<div id="data-subgroups" class="section level3">
<h3>Data subgroups</h3>
<p>The data can be grouped in two ways: either by layer or by the selected “object_” variable. This option determines the colours of the points in the 3D and 2D plots and the subsets when computing surfaces and convex hulls.</p>
</div>
<div id="objects-selection" class="section level3">
<h3>Objects selection</h3>
<p>In the “3D plot”, “Map”, “Section X”, and “Section Y” tabs, clicking on a point displays information about that point in the table below the plot.</p>
</div>
</div>
<div id="interactive-visualisation" class="section level2">
<h2>Interactive visualisation</h2>
<p>The plots in the “3D plot”, “Map”, “Section X”, and “Section Y” tabs are generated using the <a href="https://CRAN.R-project.org/package=plotly"><code>plotly</code></a> library. All the plots are dynamic and include a menu bar above the plot with several options (generating an image file, zooming, moving the view, etc). See details on the <a href="http://plotly.github.io/getting-to-know-the-plotly-modebar/"><code>plotly</code> website</a>.</p>
<p>Clicking on a legend’s item modifies the display:</p>
<ul>
<li>a simple click on an item activates/deactivates its display;</li>
<li>a double click on an item displays this item only (another double click cancels it).</li>
</ul>
<p>This feature makes it possible to choose which layers are shown. In addition, the size of the points can be set and whether the refitting relationships must be represented or not.</p>
</div>
<div id="graphical-outputs" class="section level2">
<h2>Graphical outputs</h2>
<p>Several graphical outputs can be generated in <code>archeoViz</code>.</p>
<ul>
<li>The plots in The plots in the “3D plot”, “Map”, “Section X”, and “Section Y” can be exported:
<ul>
<li>in .svg format (by cliking on the “camera” icon in the menu bar above the plot),</li>
<li>in an interactive html format, by clicking on the “Export” button.</li>
</ul></li>
<li>The plan of the excavation chronology can be exported in .svg format by clicking on the “Download” button.</li>
</ul>
</div>
<div id="reffiting" class="section level2">
<h2>Reffiting</h2>
<p>Refitting are usually recorded by archaologists in two ways:</p>
<ol style="list-style-type: decimal">
<li>by sets of refitting objects: using a two columns table, where a row corresponds to an <strong>object</strong>. The first column stores the object’ unique id and the second column stores the id of the set of refitting objects this object belongs to.</li>
<li>by refitting relationships: using a two columns table, where a row corresponds to a <strong>relationship</strong>. The first column stores the first object’s unique id and the second column stores the second object’s unique id.</li>
</ol>
<p>Although the second data structure is more accurate, the first is more commonly used.</p>
<p><code>archeoViz</code> processes the two data structures in different ways:</p>
<ul>
<li>sets of refitting objects must be described using a specific column in the <code>objects.df</code> table (e.g. <code>object_refits</code>) and are represented by the color of points in the plots (as for any other variable);</li>
<li>refitting relationships must be described using the <code>refits.df</code> table and are visualised as segments connecting the refitting objects in the plots.</li>
</ul>
</div>
<div id="spatial-statistics" class="section level2">
<h2>Spatial statistics</h2>
<p><code>archeoViz</code> includes some spatial analysis functionalities, intended for basic and exploratory use.</p>
<div id="regression-surfaces" class="section level3">
<h3>Regression surfaces</h3>
<p>In the “3D plot” tab, clicking on “Compute surfaces” and “Validate” displays the regression surface associated with each layer (with at least 100 points). The surfaces are computed using the generalized additive model implemented in the <a href="https://CRAN.R-project.org/package=mgcv"><code>mgcv</code></a> package.</p>
</div>
<div id="convex-hulls" class="section level3">
<h3>Convex hulls</h3>
<p>In the “3D plot” tab, clicking on “Compute hulls” and “Validate” displays the convex hull associated with each layer (with at least 20 points). The convex hulls are computed using the <a href="https://CRAN.R-project.org/package=cxhull"><code>cxhull</code></a> package.</p>
</div>
<div id="d-kernel-density" class="section level3">
<h3>2D kernel density</h3>
<p>In the “Map” tab, ticking the “Compute density” box and clicking on “Validate” generates a map with contour lines showing the points’ density. Density can be computed for all the points together or by layer (with at least 30 points). The 2D kernel density is computed with the <code>kde2d</code> function of the <a href="https://CRAN.R-project.org/package=MASS"><code>MASS</code></a> package (through <a href="https://CRAN.R-project.org/package=ggplot2"><code>ggplot2</code></a>).</p>
</div>
</div>
<div id="reproducibility" class="section level2">
<h2>Reproducibility</h2>
<p><code>archeoViz</code> is, by definition, an interactive application. However, several features guarantee the reproducibility and communicability of the result of interactions with the application.</p>
<ul>
<li>The 3D visualisation can be exported in an interactive html standalone format, considering the data selection made by the user.</li>
<li>In the “Reproducibility” tab, an R command is dynamically generated, considering the current application settings made by the user.</li>
</ul>
</div>
<div id="advanced-parameters" class="section level2">
<h2>Advanced parameters</h2>
<p>The <code>archeoViz()</code> function can be set with multiple optional parameters, related to:</p>
<ul>
<li>the input data (already detailed <a href="#through-function-parameters">above</a>),</li>
<li>the contents of the home page (already detailed <a href="#deployed-use">above</a>),</li>
<li>the <a href="#square-grid">square grid</a>,</li>
<li>the <a href="#parameters-presetting">presetting</a> of the parameters that can be set through the application’s interface,</li>
<li>the <a href="#reactive-plot-display">reactive behavior</a> of the application regarding the generation of plots.</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw">archeoViz</span>(<span class="dt">objects.df=</span><span class="ot">NULL</span>, <span class="dt">refits.df=</span><span class="ot">NULL</span>, <span class="dt">timeline.df=</span><span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">          <span class="dt">title=</span><span class="ot">NULL</span>, <span class="dt">home.text=</span><span class="ot">NULL</span>, <span class="dt">lang=</span><span class="st">&quot;en&quot;</span>, <span class="dt">set.theme=</span><span class="st">&quot;cosmo&quot;</span>,</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">          <span class="dt">square.size =</span> <span class="dv">100</span>, <span class="dt">reverse.axis.values =</span> <span class="ot">NULL</span>, <span class="dt">reverse.square.names =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb8-4" data-line-number="4">          <span class="dt">add.x.square.labels =</span> <span class="ot">NULL</span>, <span class="dt">add.y.square.labels =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb8-5" data-line-number="5">          <span class="dt">class.variable =</span> <span class="ot">NULL</span>, <span class="dt">class.values =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb8-6" data-line-number="6">          <span class="dt">default.group =</span> <span class="st">&quot;by.layer&quot;</span>, <span class="dt">location.mode =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb8-7" data-line-number="7">          <span class="dt">map.z.val =</span> <span class="ot">NULL</span>, <span class="dt">map.density =</span> <span class="st">&quot;no&quot;</span>, <span class="dt">map.refits =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb8-8" data-line-number="8">          <span class="dt">plot3d.hulls =</span> <span class="ot">NULL</span>, <span class="dt">plot3d.surfaces =</span> <span class="ot">NULL</span>, <span class="dt">plot3d.refits =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb8-9" data-line-number="9">          <span class="dt">sectionX.x.val =</span> <span class="ot">NULL</span>, <span class="dt">sectionX.y.val =</span> <span class="ot">NULL</span>, <span class="dt">sectionX.refits =</span> <span class="ot">NULL</span>, </a>
<a class="sourceLine" id="cb8-10" data-line-number="10">          <span class="dt">sectionY.x.val =</span> <span class="ot">NULL</span>, <span class="dt">sectionY.y.val =</span> <span class="ot">NULL</span>, <span class="dt">sectionY.refits =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb8-11" data-line-number="11">          <span class="dt">camera.center =</span> <span class="ot">NULL</span>, <span class="dt">camera.eye =</span> <span class="ot">NULL</span>, <span class="dt">run.plots =</span> <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12">          )</a></code></pre></div>
<div id="square-grid" class="section level3">
<h3>Square grid</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw">archeoViz</span>(<span class="dt">square.size =</span> <span class="dv">100</span>,</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">          <span class="dt">reverse.axis.values =</span> <span class="ot">NULL</span>, <span class="dt">reverse.square.names =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">          <span class="dt">add.x.square.labels =</span> <span class="ot">NULL</span>, <span class="dt">add.y.square.labels =</span> <span class="ot">NULL</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4">          )</a></code></pre></div>
<ul>
<li><strong>square.size</strong>: numerical. Size (width and height) in centimeter of the squares in the grid system. Default value is 100 cm.</li>
<li><strong>reverse.axis.values</strong>: character. Name of the axis or axes to be reversed (any combination of “x”, “y”, “z”).</li>
<li><strong>reverse.square.names</strong>: character. Name of the axis or axes for which to reverse the order of the square labels (any combination of “x”, “y”, “z”).</li>
<li><strong>add.x.square.labels</strong>: character. Additional square labels for the “x” axis.</li>
<li><strong>add.y.square.labels</strong>: character. Additional square labels for the “y” axis.</li>
</ul>
</div>
<div id="parameters-presetting" class="section level3">
<h3>Parameters presetting</h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw">archeoViz</span>(<span class="dt">class.variable =</span> <span class="ot">NULL</span>, <span class="dt">class.values =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">          <span class="dt">default.group =</span> <span class="st">&quot;by.layer&quot;</span>, <span class="dt">location.mode =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">          <span class="dt">map.z.val =</span> <span class="ot">NULL</span>, <span class="dt">map.density =</span> <span class="st">&quot;no&quot;</span>, <span class="dt">map.refits =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">          <span class="dt">plot3d.hulls =</span> <span class="ot">NULL</span>, <span class="dt">plot3d.surfaces =</span> <span class="ot">NULL</span>, <span class="dt">plot3d.refits =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb10-5" data-line-number="5">          <span class="dt">sectionX.x.val =</span> <span class="ot">NULL</span>, <span class="dt">sectionX.y.val =</span> <span class="ot">NULL</span>, <span class="dt">sectionX.refits =</span> <span class="ot">NULL</span>, </a>
<a class="sourceLine" id="cb10-6" data-line-number="6">          <span class="dt">sectionY.x.val =</span> <span class="ot">NULL</span>, <span class="dt">sectionY.y.val =</span> <span class="ot">NULL</span>, <span class="dt">sectionY.refits =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb10-7" data-line-number="7">          <span class="dt">camera.center =</span> <span class="ot">NULL</span>, <span class="dt">camera.eye =</span> <span class="ot">NULL</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8">          )</a></code></pre></div>
<ul>
<li><strong>class.variable</strong>: character. At the launch of the app, name of the variable to preselect.</li>
<li><strong>class.values</strong>: character vector. At the launch of the app, names of the values to preselect.</li>
<li><strong>default.group</strong>: character. At the launch of the app, preselection of the variable used to group data (one of “by.layer” or “by.variable”).</li>
<li><strong>location.mode</strong>: character. At the launch of the app, preselection of the location method (one of “exact”, “fuzzy”, “exact.fuzzy”).</li>
<li><strong>map.z.val</strong>: numerical. Minimal and maximal Z coordinates values to display in the map plot.</li>
<li><strong>map.density</strong>: character. At the launch of the app, whether to compute and show density contours in the map plot (one of “no”, “overall”, “by.variable”).</li>
<li><strong>map.refits</strong>: TRUE or FALSE. Whether to show refits in the map plot.</li>
<li><strong>plot3d.hulls</strong>: TRUE or FALSE. At the launch of the app, whether to compute and show convex hulls in the 3D plot.</li>
<li><strong>plot3d.surfaces</strong>: TRUE or FALSE. At the launch of the app, whether to compute and show regression in the 3D plot.</li>
<li><strong>plot3d.refits</strong>: TRUE or FALSE. At the launch of the app, whether to show refits on the 3D section plot.</li>
<li><strong>sectionX.x.val</strong>: numerical. At the launch of the app, minimal and maximal X coordinates values to display in the X section plot.</li>
<li><strong>sectionX.y.val</strong>: numerical. At the launch of the app, minimal and maximal Y coordinates values to display in the X section plot.</li>
<li><strong>sectionX.refits</strong>: TRUE or FALSE. At the launch of the app, whether to show refits in the X section plot.</li>
<li><strong>sectionY.x.val</strong>: numerical. At the launch of the app, minimal and maximal X coordinates values to display in the Y section plot.</li>
<li><strong>sectionY.y.val</strong>: numerical. At the launch of the app, minimal and maximal Y coordinates values to display in the Y section plot.</li>
<li><strong>sectionY.refits</strong>: TRUE or FALSE. At the launch of the app, whether to show refits in the Y section plot.</li>
<li><strong>camera.center</strong>: numerical. In 3D plot, coordinates of the point to which the camera looks at (default values: x=0, y=0, z=0).</li>
<li><strong>camera.eye</strong>: numerical. In 3D plot, coordinates of the camera’s position (default values: x=1.25, y=1.25, z=1.25).</li>
</ul>
</div>
<div id="reactive-plot-display" class="section level3">
<h3>Reactive plot display</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw">archeoViz</span>(<span class="dt">run.plots =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<ul>
<li><strong>run.plots</strong>: TRUE or FALSE. Whether to immediately compute and show plots (without requiring the user to click on the buttons in the interface).</li>
</ul>
</div>
</div>
</div>
<div id="acknowledgment" class="section level1">
<h1>Acknowledgment</h1>
<p>The <code>archeoViz</code> application and package is developed and maintained by Sébastien Plutniak. Arthur Coulon, Solène Denis, Olivier Marlet, and Thomas Perrin tested and supported the project in its early stage. Renata Araujo and Sara Giardino translated the application into Portuguese and Italian, respectively.</p>
</div>
<div id="references" class="section level1">
<h1>References</h1>
<ul>
<li>Plutniak, Sébastien, Renata Araujo, Sara Giardino. 2023. “archeoViz. Visualisation, Exploration, and Web Communication of Archaeological Excavation Data”. v1.0.0, DOI: <a href="https://doi.org/10.5281/zenodo.7682227">10.5281/zenodo.7682227</a>.</li>
<li>Plutniak, Sébastien. 2023. “<a href="https://www.prehistoire.org/offres/doc_inline_src/515/0-BSPF_2023_1_2e_partie_Correspondance_PLUTNIAK.pdf">Visualiser et explorer la distribution spatiale du mobilier archéologique: l’application archeoViz et son portail web</a>”. <em>Bulletin de la Société préhistorique française</em>, 120(1), p. 70-74.</li>
</ul>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
