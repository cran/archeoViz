<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>archeoViz. Visualisation, exploration et communication web de données spatiales archéologiques</title>


<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">archeoViz. Visualisation, exploration et communication web de données spatiales archéologiques</h1>



<p><code>archeoViz</code> est une application dédiée à l’archéologie. Elle permet de <em>visualiser</em>, d’<em>explorer</em> interactivement, et d’exposer et <em>communiquer</em> rapidement sur le web des données archéologiques spatialisées. Elle propose des <em>visualisations</em> en 3D et 2D, génère des <em>coupes</em> et des <em>cartes</em> du mobilier archéologique, permet de visualiser la <em>chronologie</em> des travaux sur un site. Il est possible d’y réaliser des <em>statistiques spatiales</em> simples (enveloppes convexes, surfaces de régression, estimation de densité par noyau en 2D) ainsi que d’<em>exporter des données</em> vers d’autres applications en ligne pour appliquer des méthodes plus complexes. <code>archeoViz</code> peut être utilisée localement ou déployée sur un serveur, soit en chargeant des données via l’interface, soit en lançant l’application avec un jeu de donnée spécifique. L’interface est disponible en allemand, anglais, italien, français, portugais et roumain. Page web: <a href="https://archeoviz.hypotheses.org" class="uri">https://archeoviz.hypotheses.org</a>.</p>
<ul>
<li><a href="#installation"><strong>Installation</strong></a>
<ul>
<li><a href="#locale">Locale</a></li>
<li><a href="#distante">Distante</a></li>
<li><a href="#démonstration">Démonstration</a></li>
</ul></li>
<li><a href="#recommandations-communautaires"><strong>Recommandations communautaires</strong></a>
<ul>
<li><a href="#signaler-un-bug">Signaler un bug</a></li>
<li><a href="#soumettre-une-modification">Soumettre une modification</a></li>
<li><a href="#traduire">Traduire</a></li>
</ul></li>
<li><a href="#utilisation"><strong>Utilisation</strong></a>
<ul>
<li><a href="#linformation-spatiale-dans-archeoviz">L’information spatiale dans archeoViz</a>
<ul>
<li><a href="#points-localisation-exacte--les-objets-relevés">Points, localisation exacte : les objets relevés</a></li>
<li><a href="#points-localisation-vague--passes-seaux-tamis-et-erreurs-denregistement">Points, localisation vague : passes, seaux, tamis et erreurs d’enregistement</a></li>
<li><a href="#lignes">Lignes</a></li>
<li><a href="#surfaces">Surfaces</a></li>
</ul></li>
<li><a href="#remontages-et-mesures-de-fabrique">Remontages et mesures de fabrique</a>
<ul>
<li><a href="#remontages">Remontages</a></li>
<li><a href="#mesures-de-fabrique">Mesures de fabrique</a><br />
</li>
</ul></li>
<li><a href="#formater-des-données">Format de données</a>
<ul>
<li><a href="#formater-des-données">Formater des données</a></li>
<li><a href="#tableau-des-objets">Tableau des objets</a></li>
<li><a href="#tableau-des-remontages">Tableau des remontages</a></li>
<li><a href="#tableau-de-la-chronologie">Tableau de la chronologie</a></li>
</ul></li>
<li><a href="#charger-des-données">Charger des données</a>
<ul>
<li><a href="#via-linterface-de-lapplication">Via l’interface de l’application</a></li>
<li><a href="#via-les-paramètres-de-la-fonction-r">Via les paramètres de la fonction R</a></li>
<li><a href="#via-les-paramètres-dune-url">Via les paramètres d’une URL</a></li>
<li><a href="#par-génération-de-données-aléatoires">Par génération de données aléatoires</a></li>
<li><a href="#rotation-des-points">Rotation des points</a></li>
</ul></li>
<li><a href="#sous-sélection-de-données">Sous-sélection de données</a>
<ul>
<li><a href="#par-mode-de-localisation">Par mode de localisation</a></li>
<li><a href="#par-couche-ou-catégorie-dobjet">Par couche ou catégorie d’objet</a></li>
</ul></li>
<li><a href="#visualisations-interactives">Visualisations interactives</a>
<ul>
<li><a href="#généralités">Généralités</a></li>
<li><a href="#sorties-graphiques">Sorties graphiques</a></li>
<li><a href="#visualisation-de-l-incertitude-spatiale">Visualisation de l’incertitude spatiale</a><br />
</li>
</ul></li>
<li><a href="#statistiques-spatiales">Statistiques spatiales</a>
<ul>
<li><a href="#surfaces-de-régression">Surfaces de régression</a></li>
<li><a href="#enveloppes-convexes">Enveloppes convexes</a></li>
<li><a href="#estimation-2d-de-densité-par-noyau">Estimation 2D de densité par noyau</a></li>
</ul></li>
</ul></li>
<li><a href="#reproductibilité"><strong>Reproductibilité</strong></a><br />
</li>
<li><a href="#exports-depuis-et-vers-des-applications-tierces"><strong>Exports depuis et vers des applications tierces</strong></a>
<ul>
<li><a href="#export-depuis-archeoviz">Export depuis archeoViz</a></li>
<li><a href="#import-vers-archeoviz">Import vers archeoViz</a></li>
</ul></li>
<li><a href="#paramètres-avancés"><strong>Paramètres avancés</strong></a>
<ul>
<li><a href="#carroyage">Carroyage</a></li>
<li><a href="#pré-sélection-des-paramètres">Pré-sélection des paramètres</a></li>
<li><a href="#affichage-réactif-des-visualisations">Affichage réactif des visualisations</a></li>
<li><a href="#contrôle-des-formats-d-export">Contrôle des formats d’export</a></li>
<li><a href="#paramètres-url">Paramètres URL</a></li>
</ul></li>
<li><a href="#remerciements"><strong>Remerciements</strong></a></li>
<li><a href="#références-et-ressources"><strong>Références et ressources</strong></a>
<ul>
<li><a href="#logiciels">Logiciels</a></li>
<li><a href="#articles">Articles</a></li>
<li><a href="#présentations">Présentations</a></li>
<li><a href="#sites-web">Sites web</a></li>
</ul></li>
</ul>
<div id="installation" class="section level1">
<h1>Installation</h1>
<p><code>archeoViz</code> peut être employée de deux manières:</p>
<ul>
<li>localement, sur la machine de l’utilisateur</li>
<li>à distance, après déploiement sur un serveur distant</li>
</ul>
<div id="locale" class="section level2">
<h2>Locale</h2>
<p>Le package peut être installé depuis le CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">&quot;archeoViz&quot;</span>)</a></code></pre></div>
<p>La version de développement peut être téléchargée depuis <em>GitHub</em>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># install.packages(&quot;devtools&quot;)</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;sebastien-plutniak/archeoviz&quot;</span>)</a></code></pre></div>
<p>Après quoi, chargez le package et lancez l’application avec:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">library</span>(archeoViz)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw">archeoViz</span>()</a></code></pre></div>
</div>
<div id="déployée" class="section level2">
<h2>Déployée</h2>
<p>Pour déployer <code>archeoViz</code> sur votre Shiny server, téléchargez premièrement le package:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co"># déterminez le répertoire de travail dans votre shiny server:</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="kw">setwd</span>(<span class="dt">dir =</span> <span class="st">&quot;/some/path/&quot;</span>)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co"># téléchargez le package:</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="kw">download.file</span>(<span class="dt">url =</span> <span class="st">&quot;https://github.com/sebastien-plutniak/archeoviz/archive/master.zip&quot;</span>,</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">              <span class="dt">destfile =</span> <span class="st">&quot;archeoviz.zip&quot;</span>)</a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co"># décompression:</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="kw">unzip</span>(<span class="dt">zipfile =</span> <span class="st">&quot;archeoviz.zip&quot;</span>)</a></code></pre></div>
<p>Puis, rendez-vous à <code>https://&lt;your-shiny-server&gt;/archeoviz-main</code>.</p>
<p>Pour paramétrer l’application avec vos données et préférences, éditez le fichier <code>app.R</code> situé à la racine du répertoire de l’application:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">archeoViz</span>(<span class="dt">objects.df =</span> <span class="ot">NULL</span>,   <span class="co"># data.frame pour les objets</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">          <span class="dt">refits.df =</span> <span class="ot">NULL</span>,    <span class="co"># data.frame optionnel pour les remontages</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3">          <span class="dt">timeline.df =</span> <span class="ot">NULL</span>,  <span class="co"># data.frame optionnel pour la chronologie des fouilles</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4">          <span class="dt">default.group =</span><span class="ot">NULL</span>, <span class="co"># méthode de groupement des données,</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5">                               <span class="co"># par couche (&quot;by.layer&quot;) ou &quot;by.variable&quot;</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6">          <span class="dt">title =</span> <span class="ot">NULL</span>,        <span class="co"># titre du site / du jeu de données</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7">          <span class="dt">home.text =</span> <span class="ot">NULL</span>,    <span class="co"># contenu HTML à afficher sur la page d'accueil</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8">          <span class="dt">lang =</span> <span class="st">&quot;fr&quot;</span>          <span class="co"># langue de l'interface (&quot;de&quot;: Allemand, &quot;en&quot;: Anglais, &quot;fr&quot;: Français, &quot;it&quot;: Italien &quot;pt&quot;: Portugais, &quot;es&quot;: Espagnol)</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9">          <span class="dt">set.theme =</span> <span class="st">&quot;cosmo&quot;</span>) <span class="co"># thème graphique de l'interface Shiny</span></a></code></pre></div>
<p>Les valeurs possibles pour le paramètre <code>set.theme</code> sont illustrées sur <a href="https://rstudio.github.io/shinythemes/">cette page</a>. La langue de l’application peut être définie avec le paramètre <code>lang</code>.</p>
</div>
<div id="démonstration" class="section level2">
<h2>Démonstration</h2>
<p>Des instances de démonstration de l’application sont déployées sur le Shiny server d’<em>Huma Num</em>:</p>
<ul>
<li><a href="https://analytics.huma-num.fr/archeoviz/fr"><code>archeoViz</code> en français</a>.</li>
<li><a href="https://analytics.huma-num.fr/archeoviz/en"><code>archeoViz</code> en anglais</a>.</li>
<li><a href="https://analytics.huma-num.fr/archeoviz/de"><code>archeoViz</code> en allemand</a>.</li>
<li><a href="https://analytics.huma-num.fr/archeoviz/es"><code>archeoViz</code> en espagnol</a>.</li>
<li><a href="https://analytics.huma-num.fr/archeoviz/it"><code>archeoViz</code> en italien</a>.</li>
<li><a href="https://analytics.huma-num.fr/archeoviz/pt"><code>archeoViz</code> en portugais</a>.</li>
<li><a href="https://analytics.huma-num.fr/archeoviz/ro"><code>archeoViz</code> en roumain</a>.</li>
</ul>
<p>Des cas d’applications à divers sites archéologiques sont rassemblés sur le <a href="https://analytics.huma-num.fr/archeoviz/home"><em>Portail archeoViz</em></a>.</p>
</div>
</div>
<div id="recommandations-communautaires" class="section level1">
<h1>Recommandations communautaires</h1>
<div id="signaler-un-bug" class="section level2">
<h2>Signaler un bug</h2>
<p>Si vous rencontrez un bug, ouvrez une <a href="https://github.com/sebastien-plutniak/archeoviz/issues"><em>issue</em></a> en indiquant tous les détails nécessaires pour le reproduire.</p>
</div>
<div id="suggérer-un-changement" class="section level2">
<h2>Suggérer un changement</h2>
<p>Les suggestions de modifications sont bienvenues. Les demandes peuvent concerner des fonctions additionnelles, des modifications dans la documentation, des exemples additionnels, de nouvelles fonctionnalités, etc. Elles peuvent être faites en ouvrant une <a href="https://github.com/sebastien-plutniak/archeoviz/issues">issue</a> ou, mieux encore, en employant une <em>pull requests</em> et le modèle GitHub <a href="https://docs.github.com/articles/about-pull-requests">Fork and Pull</a>.</p>
</div>
<div id="traduire" class="section level2">
<h2>Traduire</h2>
<p>Un soin particulier est accordé au multilinguisme. L’interface de l’application est disponible en plusieurs langues et les traduction dans des langues supplémentaires sont bienvenues. Pour cela, éditez ce <a href="https://github.com/sebastien-plutniak/archeoviz/blob/main/R/load_interface_terms_utf8.R">fichier</a> et soumettez une <em>pull request</em>.</p>
</div>
</div>
<div id="utilisation" class="section level1">
<h1>Utilisation</h1>
<p>Considérant les objets archéologiques d’un site de fouille ou de prospection, <code>archeoViz</code> est conçu pour réduire les freins techniques à la réalisation de trois objectifs:</p>
<ul>
<li>l’exploration spatiale basique et la production de documents graphiques analytiques;</li>
<li>la pré-publication rapide de données archéologiques, à destination de la communauté scientifique;</li>
<li>le déploiement aisé d’un outil d’exposition et de communication, à destination d’un plus large public.</li>
</ul>
<p>En outre, <code>archeoViz</code> constitue une ressource pédagogique adaptée à l’enseignement des notions d’analyse spatiale en archéologie, de structuration de données, de science ouverte et de reproductibilité.</p>
<p>N.B.: par conséquent, <code>archeoViz</code> n’est pas destiné à se substituer à des outils d’analyse plus sophistiqués (e.g., SIG, packages de statistiques spatiales, etc.)</p>
<div id="linformation-spatiale-dans-archeoviz" class="section level2">
<h2>L’information spatiale dans archeoViz</h2>
<p>Les archéologues enregistrent la localisation des objets archéologique à différentes échelles et granularité. En fonction de cela, ils utilisent différentes concepts géométriques pour représenter ces localisations.</p>
<div id="points-localisation-exacte-les-objets-relevés" class="section level3">
<h3>Points, localisation exacte : les objets relevés</h3>
<p>L’utilisation d’un carroyage ou d’une “station totale” permet d’enregistrer la localisation individuelle des objets sur le terrain. Dans ce cas, dans <code>archeoViz</code>, localisation de ces objets sera visualisée par des points (des triplets de valeurs de coordonnées x, y, z).</p>
</div>
<div id="points-localisation-vague-passes-seaux-tamis-et-erreurs-denregistement" class="section level3">
<h3>Points, localisation vague : passes, seaux, tamis et erreurs d’enregistement</h3>
<p>Toutefois, il est fréquent que les coordonnées x, y, z des objets ne soit pas disponible, pour différentes raisons:</p>
<ul>
<li>des erreurs d’enregistrement, des pertes d’information, entraînant la nécessité de remplacer une ou plusieurs valeurs de coordonnées par des intervalles de valeurs (par exemple, une valeur X est manquante pour un objet et est remplacée par les valeurs X minimale et maximale du carré où cet objet a été trouvé) ;</li>
<li>le choix de la méthode (par exemple, lors d’une fouille réalisée et enregistrée à l’aide de passes de profondeur arbitraire ou, encore, des objets issus de refus de tamis, etc.)</li>
</ul>
<p>Dans tous ces cas, les localisations à traiter sont vagues, lorsque la localisation des objets n’est pas connue univoquement mais se situe quelque part au sein d’intervalles de coordonnées. La localisation vague peut concerner une, deux, ou trois dimensions spatiales (respectivement les coordonnées x, y et z).</p>
<p>Cette fonctionnalité peut également être employée pour tenir compte de l’imprécision des instruments de relevé.</p>
</div>
<div id="lignes" class="section level3">
<h3>Lignes</h3>
<p>Les lignes sont des géométries utiles pour représenter des relations. En archéologie, il peut s’agir de relations de <a href="#remontages">remontages</a> entre fragments d’objets, d’orientation (<a href="#mesures-de-fabrique">mesures de fabrique</a>), etc. Dans <code>archeoViz</code>, les lignes sont générées à partir des données chargées comme données de remontage, soit à partir de l’onglet “Données”, soit avec le paramètre <code>refits.df</code> de la fonction <code>archeoViz()</code>.</p>
</div>
<div id="surfaces" class="section level3">
<h3>Surfaces</h3>
<p>Les surfaces sont des géométries utiles pour représenter des niveaux de sol, des tranchées, des fosses, etc. Dans <code>archeoViz</code>, ceci peut être réalisé, en définissant un sous-ensemble de points résumant la surface souhaitée, puis en affichant l’<a href="#enveloppes-convexes">enveloppe convexe</a> de ce sous-ensemble.</p>
</div>
</div>
<div id="remontages-et-mesures-de-fabrique" class="section level2">
<h2>Remontages et mesures de fabrique</h2>
<div id="remontages" class="section level3">
<h3>Remontages</h3>
<p>Les remontages sont généralement enregistrés de deux manières par les archéologues:</p>
<ol style="list-style-type: decimal">
<li>par ensemble d’objets remontant entre eux: en employant alors un tableau à deux colonnes où une ligne correspond à un <strong>objet</strong>. La première colonne contient l’identifiant unique de l’objet et la deuxième colonne contient l’identifiant unique de l’ensemble d’objets remontant entre eux auquel l’objet considéré appartient.</li>
<li>par relation de remontage: en employant alors un tableau à deux colonnes où une ligne correspond à une <strong>relation de remontage</strong>. La première colonne contient l’identifiant unique du premier objet et la deuxième colonne contient l’identifiant unique du deuxième objet.</li>
</ol>
<p>Bien que la seconde structure de donnée soit plus précise, c’est la première qui est le plus fréquemment employée.</p>
<p>Ces deux structures de données sont traitées différemment dans <code>archeoViz</code>:</p>
<ul>
<li>les ensembles d’objets remontant entre eux doivent être décrits dans une colonne spécifique dans le tableau <code>objects.df</code> table (nommée par ex. <code>object_refits</code>) et sont représentés par la couleur des points dans les visualisations (comme pour tout autre variable);</li>
<li>les relations de remontage doivent être décrits dans un tableau <code>refits.df</code> et sont visualisés par des segments reliant les objets liés par des relations de remontage.</li>
</ul>
</div>
<div id="mesures-de-fabrique" class="section level3">
<h3>Mesures de fabrique</h3>
<p>Pour l’heure, <code>archeoViz</code> ne gère pas les mesures de fabrique à proprement dit. Néanmoins, la procédure employée pour représenter les remontages peut être adaptée et employée pour représenter les mesures de fabriques. Cela suppose toutefois de tordre la logique de la structure des données de la manière suivante:</p>
<ul>
<li>en supposant que les mesures de fabriques ont été enregistrées en prenant deux mesures de localisation par objet (au contraire, donc, de mesure d’orientation et de pendage),</li>
<li>des valeurs d’identifiants uniques <code>id</code> doivent être attribuées aux deux points, et</li>
<li>les deux localisations sont traitées comme s’il s’agissait d’une relation de remontage entre deux objets.</li>
</ul>
<p>Un exemple de cette méthode est visible <a href="https://analytics.huma-num.fr/archeoviz/shuidonggou2">ici</a>.</p>
</div>
</div>
<div id="formater-des-données" class="section level2">
<h2>Formater des données</h2>
<p>Trois types de données peuvent être chargées dans <code>archeoViz</code>:</p>
<ul>
<li>un tableau “objects” (requis), à propos des objets;</li>
<li>un tableau “refits” (optionnel), à propos des relations de remontage;</li>
<li>un tableau “timeline” (optionnel), à propos des carrés du site et des années où ils ont été fouillés ou prospectés.</li>
</ul>
<p>Les tableaux doivent être au format CSV et la première ligne doit contenir les noms des variables (le symbole séparateur du CSV peut être défini dans l’interface). Les contenus au format HTML sont autorisés. Cela permet notamment d’introduire références vers des ressources complémentaires du jeu de données (par exemple l’identifiant unique de l’objets dans une autre base de données, ou ceux de concepts d’ontologies employés pour décrire l’objet, etc.).</p>
<p>Le formatage des données peut être réalisé :</p>
<ul>
<li>soit en utilisant un tableur sur votre machine permettant d’exporter des fichiers CSV;</li>
<li>ou, pour le tableau des objets, en utilisant l’interface de l’application <a href="https://aurelienroyer.shinyapps.io/Seahors/"><em>SEAHORS</em></a> en chargeant vos données, définissant les variables (onglet “Load data”), puis en les exportant au format <code>archeoViz</code> (onglet “Table” / “archeoViz exports”). Il est également possible de les transférer directement à une instance <code>archeoViz</code> en ligne.</li>
</ul>
<div id="tableau-des-objets" class="section level3">
<h3>Tableau des objets</h3>
<p>Chaque ligne décrit un objet et doit comporter les variables obligatoires suivantes:</p>
<ul>
<li><strong>id</strong>: <em>valeur alphanumérique</em>, identifiant unique de l’objet</li>
<li><strong>xmin</strong>: <em>valeur numérique</em>, coordonnée de l’objet en axe X (en cm)</li>
<li><strong>ymin</strong>: <em>valeur numérique</em>, coordonnée de l’objet en axe Y (en cm)</li>
<li><strong>zmin</strong>: <em>valeur numérique</em>, coordonnée de l’objet en axe Z (valeur positive de profondeur en cm)</li>
<li><strong>layer</strong>: <em>valeur alphanumérique</em>, identifiant de la couche de l’objet</li>
<li><strong>object_type</strong>: <em>valeur alphanumérique</em>, catégorie de l’objet</li>
</ul>
<p>De plus, des variables optionnelles sont possibles:</p>
<ul>
<li><strong>square_x</strong>: <em>valeur alphanumérique</em>, identifiant du carré de l’objet en axe X</li>
<li><strong>square_y</strong>: <em>valeur alphanumérique</em>, identifiant du carré de l’objet en axe Y</li>
<li><strong>year</strong>: <em>valeur numérique</em>, année de fouille de l’objet</li>
<li><strong>xmax</strong>: <em>valeur numérique</em>, lorsque la localisation de l’objet en X est comprise dans un intervalle de coordonnées</li>
<li><strong>ymax</strong>: <em>valeur numérique</em>, lorsque la localisation de l’objet en Y est comprise dans un intervalle de coordonnées</li>
<li><strong>zmax</strong>: <em>valeur numérique</em>, lorsque la localisation de l’objet en Z est comprise dans un intervalle de coordonnées</li>
<li><strong>object_edit</strong>: nombre non limité de variables additionnelles décrivant l’objet (les noms de colonnes doivent commencer par <em>object_</em> et avoir des suffixes différents</li>
</ul>
<p>Les labels des carrés du carroyage:</p>
<ul>
<li>sont ordonnés alpha-numériquement;</li>
<li>ne sont pas affichés, afin d’éviter des affichages erronés, si le nombre de labels ne correspond pas exactement au nombre total de carrés de 100cm pouvant être définis dans l’intervalle des coordonnées minimales et maximales contenues dans les variables xmin et ymin;</li>
<li>peuvent être complétés avec les paramètres <code>add.x.square.labels</code> et <code>add.y.square.labels</code> de la fonction <code>archeoViz()</code> afin d’ajouter les labels manquants (respectivement, sur les axes X et Y du carroyage).</li>
</ul>
</div>
<div id="tableau-des-remontages" class="section level3">
<h3>Tableau des remontages</h3>
<p>Un tableau à deux colonnes peut être chargé pour les remontages entre objets (format CSV). Chaque ligne doit contenir les identifiants uniques des deux objets liés à une relation de remontage (en correspondance avec les valeurs de la colonne <code>id</code> du tableau des objets).</p>
</div>
<div id="tableau-de-la-chronologie" class="section level3">
<h3>Tableau de la chronologie</h3>
<p>Optionnellement, un tableau (CSV) peut être chargé à propos du déroulé de la fouille. Chaque ligne est relative à un carré de fouille et indique quand ce carré a été fouillé ou prospecté. Le tableau doit comporter les variables suivantes:</p>
<ul>
<li><strong>year</strong>: valeur numérique, année de fouille</li>
<li><strong>square_x</strong>: valeur alphanumérique, identifiant du carré en axe X</li>
<li><strong>square_y</strong>: valeur alphanumérique, identifiant du carré en axe Y</li>
</ul>
</div>
</div>
<div id="charger-des-données" class="section level2">
<h2>Charger des données</h2>
<p>Quatre manières permettent de charger des données dans <code>archeoViz</code>:</p>
<ol style="list-style-type: decimal">
<li>en téléchargeant des tableaux à partir de l’onglet “Données”;</li>
<li>en chargeant des tableaux à travers les paramètres de la fonction <code>archeoViz</code>, dans un environnement R;</li>
<li>en téléchargeant des tableaux via les paramètres d’URL, lors de l’utilisation d’une instance <code>archeoViz</code> en ligne.</li>
<li>en générant des données aléatoires dans l’onglet “Données”;</li>
</ol>
<div id="via-linterface-de-lapplication" class="section level3">
<h3>Via l’interface de l’application</h3>
<p>Des tableaux pour trois types de données peuvent être chargés à partir de l’onglet “Données”. Le séparateur CSV (la virgule, le point-virgule ou la tabulation) et le caractère distinguant les décimales dans les nombres (point ou virgule) peuvent être paramétrés.</p>
</div>
<div id="via-les-paramètres-de-la-fonction-r" class="section level3">
<h3>Via les paramètres de la fonction R</h3>
<p>La fonction de lancement d’<code>archeoViz()</code> peut être exécutée sans définir de paramètres:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">archeoViz</span>()</a></code></pre></div>
<p>ou en employant les paramètres <code>objects.df</code>, <code>refits.df</code>, <code>timeline.df</code> afin de charger des données relatives, respectivement, aux objets, aux remontages, et à la chronologie.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw">archeoViz</span>(<span class="dt">objects.df =</span> <span class="ot">NULL</span>,  <span class="co"># data.frame pour les objets</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">          <span class="dt">refits.df =</span> <span class="ot">NULL</span>,   <span class="co"># data.frame optionnel pour les remontages</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3">          <span class="dt">timeline.df =</span> <span class="ot">NULL</span>) <span class="co"># data.frame optionnel pour la chronologie</span></a></code></pre></div>
</div>
<div id="via-les-paramètres-dune-url" class="section level3">
<h3>Via les paramètres d’une URL</h3>
<p>L’URL d’une instance <code>archeoViz</code> en ligne peut être complétée avec les paramètres:</p>
<ul>
<li><code>objects.df=</code></li>
<li><code>refits.df=</code></li>
<li><code>timeline.df=</code></li>
</ul>
<p>prenant pour valeurs l’URL d’un fichier CSV respectant le format <code>archeoViz</code> décrit ci-dessus. Par exemple: <a href="https://analytics.huma-num.fr/archeoviz/fr/?objects.df=https://zenodo.org/record/8003880/files/bilzingsleben.csv" class="uri">https://analytics.huma-num.fr/archeoviz/fr/?objects.df=https://zenodo.org/record/8003880/files/bilzingsleben.csv</a></p>
</div>
<div id="par-génération-de-données-aléatoires" class="section level3">
<h3>Par génération de données aléatoires</h3>
<p>À des fins de démonstration, il est possible d’employer des données générées aléatoirement. Déplacer le curseur sur une valeur supérieure à 0, dans l’onglet “Données”, active cette fonctionnalité (replacer le curseur sur 0 la désactive). Des données d’objets, de remontage, et de chronologie de la fouille sont alors générés, permettant de tester toutes les fonctionnalités d’<code>archeoViz</code>.</p>
</div>
<div id="rotation-des-points" class="section level3">
<h3>Rotation des points</h3>
<p>Il est possible de modifier l’orientation des points en plan. Dans l’onglet “Données”, sélectionnez une valeur (en degrés) et validez en cliquant sur le bouton “Validez la sélection”.</p>
</div>
</div>
<div id="sous-sélection-de-données" class="section level2">
<h2>Sous-sélection de données</h2>
<p>Après que les données soient chargées, des sous-sélections peuvent être réalisées en employant les options du menu gauche de l’interface. Plusieurs paramètres sont possibles: le mode de localisation, les catégories des objets, et la définition de sous-groupes de données.</p>
<div id="par-mode-de-localisation" class="section level3">
<h3>Par mode de localisation</h3>
<p>Si tous les objets ont des localisation soit exactes soit vagues, aucune option n’est proposée. Par contre, le jeu de données comprend des localisations des deux types, alors il est possible de n’en sélectionner qu’un type ou les deux.</p>
</div>
<div id="par-couche-ou-catégorie-dobjet" class="section level3">
<h3>Par couche ou catégorie d’objet</h3>
<p>Des sous-groupes de données peuvent être définies de deux manières: soit par couche ou en fonction de la variable “object_” sélectionnée. Cette option détermine l’application des couleurs dans les graphiques 3D et 2D et les sous-groupes de données auxquels sont appliqués les calculs de surface de régression et d’enveloppes convexes. Des sous-ensembles de données peuvent être définis à partir des catégories des objets, en employant les champs “Variable” et “Valeurs”. Après que l’une des variables ait été sélectionnée (“object_type” ou une autre “object_” variable possible), ses valeurs apparaissent en dessous et peuvent être sélectionnées en cochant les items. La sélection doit être validée en cliquant sur le bouton “Valider”. Cette sélection détermine les données qui seront présentées dans les graphiques et tableaux.</p>
</div>
</div>
<div id="visualisations-interactives" class="section level2">
<h2>Visualisations interactives</h2>
<div id="généralités" class="section level3">
<h3>Généralités</h3>
<p>Les visualisations dans les onglets “Vue 3D”, “Carte”, “Section X” et “Section Y” sont générées à l’aide de la librairie <a href="https://CRAN.R-project.org/package=plotly/"><code>plotly</code></a>. Toutes ces visualisations sont dynamiques et sont surmontées d’une barre de menu comportant plusieurs options (générer un fichier image, zoomer, déplacer le point de vue, etc.). Davantage de détails sont disponibles sur le <a href="http://plotly.github.io/getting-to-know-the-plotly-modebar/">site de <code>plotly</code></a>.</p>
<p>Cliquer sur un item de la légende modifie l’affichage:</p>
<ul>
<li>un simple clic sur un item active/désactive son affichage;</li>
<li>un double clic sur un item limite l’affichage à cet item seul (un autre double clic annule cette sélection).</li>
</ul>
<p>Cette fonctionnalité permet de définir les couches devant être affichées. De plus, la taille des points peut être ajustée, ainsi que l’affichage ou non des relations de remontage.</p>
<p>Enfin, cliquer sur un point active l’affichage d’informations à son sujet dans le tableau présent sous les visualisations.</p>
</div>
<div id="visualisation-de-lincertitude-spatiale" class="section level3">
<h3>Visualisation de l’incertitude spatiale</h3>
<p>Dans <code>archeoViz</code>, une distinction est faite entre les localisations exactes (données sous la forme de coordonnées x, y, z) et les localisations vagues (données sous la forme d’intervalles de coordonnées). Il est possible d’afficher Les deux types de localisations peuvent être visualisées. Les incertitudes des localisations peuvent être rendues en représentant les objets non pas comme des points mais comme des lignes, des plans, ou des volumes (si des intervalles de coordonnées sont précisés pour, respectivement, une, deux ou trois dimensions spatiales). Cette dernière option est gourmande en ressources, l’appliquer à un nombre important d’objets peut ralentir considérablement l’application.</p>
</div>
<div id="sorties-graphiques" class="section level3">
<h3>Sorties graphiques</h3>
<p>Plusieurs sorties graphiques peuvent être générées dans <code>archeoViz</code>.</p>
<ul>
<li>Les visualisations en 3D, en plan et en sections peuvent être exportées:
<ul>
<li>au format SVG, en cliquant sur l’icône “appareil photo” de la barre de menu s’affichant au-dessus des visualisations;</li>
<li>en format HTML interactif, en cliquant sur le bouton “Exporter” dans la colonne droite de l’interface.</li>
</ul></li>
<li>Le plan miniature dans les onglets “Section X” et “Section Y” peut être exporté au format SVG en cliquant sur le lien “Télécharger plan”.</li>
<li>Le plan de la chronologie des fouilles peut être téléchargé au format SVG en cliquant sur le bouton “Télécharger”.</li>
</ul>
</div>
</div>
<div id="statistiques-spatiales" class="section level2">
<h2>Statistiques spatiales</h2>
<p><code>archeoViz</code> comporte quelques fonctionnalités d’analyse spatiale, destinées à usage simple et exploratoire.</p>
<div id="surfaces-de-régression" class="section level3">
<h3>Surfaces de régression</h3>
<p>Dans l’onglet “Vue 3D”, cliquer sur “Calculer les surfaces” puis “Valider” affiche les surfaces de régression associées à chaque sous-ensemble de points (couche), comportant au moins 100 points. Les surfaces sont calculées grâce au modèle additif généralisé implémenté dans le package <a href="https://CRAN.R-project.org/package=mgcv"><code>mgcv</code></a>.</p>
</div>
<div id="enveloppes-convexes" class="section level3">
<h3>Enveloppes convexes</h3>
<p>Dans l’onglet “Vue 3D”, l’affichage des enveloppes convexes se réalise en:</p>
<ol style="list-style-type: decimal">
<li>cochant la case “Enveloppes convexes”,</li>
<li>sélectionnant, dans le menu qui s’affiche, les sous-ensembles de points pour lesquels les enveloppes doivent être calculées,</li>
<li>appuyant sur “Valider”.</li>
</ol>
<p>Les enveloppes convexes associées à chaque sous-ensemble de points comportant au moins 20 points sont alors affichées. Le calcul des enveloppes est réalisé avec le package <a href="https://CRAN.R-project.org/package=cxhull"><code>cxhull</code></a>.</p>
</div>
<div id="estimation-2d-de-densité-par-noyau" class="section level3">
<h3>Estimation 2D de densité par noyau</h3>
<p>Dans l’onglet “Plan”, cocher la case “Calculer la densité” et cliquer sur “Valider” génère un plan comportant des lignes de contour représentant la densité des points. La densité peut être calculée pour l’ensemble des points ou par couche (comportant au moins 30 points). L’estimation bidimensionnelle de densité par noyau est calculée avec la fonction <code>kde2d</code> du package <a href="https://CRAN.R-project.org/package=MASS"><code>MASS</code></a> (à travers le package <a href="https://CRAN.R-project.org/package=ggplot2"><code>ggplot2</code></a>).</p>
</div>
</div>
<div id="reproductibilité" class="section level2">
<h2>Reproductibilité</h2>
<p><code>archeoViz</code> est, par définition, une application interactive. Toutefois, plusieurs fonctionnalités permettent de satisfaire les besoins de reproductibilité et de communicabilité des résultats d’interactions avec l’application.</p>
<ul>
<li>La visualisation 3D est exportable dans un format interactif HTML <em>standalone</em>, tenant compte de la sous-sélection de données effectuée par l’utilisateur (dans le menu latéral gauche).</li>
<li>Dans l’onglet “Reproductibilité”, une commande R est générée dynamiquement, tenant compte du paramétrage de l’application réalisé par l’utilisateur en agissant avec l’interface graphique.</li>
<li>Dans un usage plus avancé, les paramètres d’URL permettent de paramétrer une instance en ligne de l’application avec des paramètres d’intérêt et de la communiquer l’ensemble en envoyant l’URL à un tiers.</li>
</ul>
</div>
<div id="exports-depuis-et-vers-des-applications-tierces" class="section level2">
<h2>Exports depuis et vers des applications tierces</h2>
<p><code>archeoViz</code> a été conçu comme l’une des pièces d’un écosystème numérique décentralisé pour les données et analyses archéologiques. Dans cette approche, les fonctionnalités sont distribuées entre de multiples applications interconenctées, plutôt que concentrées dans un petit nombre de systèmes. Par conséquent, les données peuvent être exportées et importées entre <code>archeoViz</code> et d’autres applications web. Notez que, jusqu’ici, les fonctionnalités d’export ne sont disponibles que dans le cas d’instances <code>archeoViz</code> déployées en ligne.</p>
<div id="export-depuis-archeoviz" class="section level3">
<h3>Export depuis archeoViz</h3>
<p>À partir de l’onglet “Statistiques” d’<code>archeoViz</code>, il est possible d’exporter les données vers d’autres applications en ligne. La possibilité de certains exports est conditionnée au type de données ou à la satisfaction d’un nombre minimal de valeurs.</p>
<p><a href="https://analytics.huma-num.fr/Sebastien.Plutniak/archeofrag"><em>archeofrag</em></a> est un package R et une application web permettant d’estimer et d’évaluer les distinctions entre unités spatiales archéologiques (par ex. des couches) à partir de l’analyse des relations de remontage entre fragments d’objets. La version web de l’application intègre des méthodes pour mesurer la cohésion et le mélange d’unités spatiales et de les comparer à des données simulées. Lorsqu’une instance d’<code>archeoViz</code> est executée avec des <a href="#tableau-des-remontages">données de remontage</a>, alors ces données peuvent être exportées vers <code>archeofrag</code>. Cf. cet <a href="https://analytics.huma-num.fr/archeoviz/grotte16">exemple</a>.</p>
<p>Le <a href="https://analytics.huma-num.fr/ModAthom/seriograph/"><em>Seriograph</em></a> est une application web (inclues dans la collection <a href="https://spartaas.gitpages.huma-num.fr/r-package/">SPARTAAS</a>) pour visualiser des changements quantitatifs dans la distribution de types d’artefacts dans des séries ordonnées ou non-ordonnées d’unités spatiales. Lorsqu’une instance d’<code>archeoViz</code> est executée avec un jeu de données contenant au moins 2 valeurs différentes pour la variable <code>layers</code> et 2 valeurs différentes pour la variable <code>object_type</code>, alors ces données peuvent être analysées avec l’application <code>Seriograph</code>. Cf. cet <a href="https://analytics.huma-num.fr/archeoviz/poeymau">exemple</a>.</p>
<p><a href="https://app.ptm.huma-num.fr/amado/"><em>Amado online</em></a> est une application en ligne permettant d’analyser des tableaux de contingence. Il est possible d’exporter un tableau croisant les valeurs de la variable sélectionnée (par défaut, <code>object_type</code>) et les valeurs de la variable <code>layer</code>. <code>Amado</code> permet de réordonner manuellement les lignes et les colonnes et d’exécuter des sériations et classifications automatiques. Cf. cet <a href="https://analytics.huma-num.fr/archeoviz/tai">exemple</a>.</p>
<p><a href="https://cran.r-project.org/package=explor"><em>explor</em></a> est une application R Shiny / package R permettant d’explorer interactivement les résultats d’analyses multidimensionnelles. <code>explor</code> a été adapté pour exécuter une analyse factorielle des correspondances sur un tableau de contingence croisant les valeurs de la variable sélectionnée (par défaut, <code>object_type</code>) et les valeurs de la variable <code>layer</code>. Cf. cet <a href="https://analytics.huma-num.fr/archeoviz/tai">exemple</a>.</p>
</div>
<div id="import-vers-archeoviz" class="section level3">
<h3>Import vers archeoViz</h3>
<p><a href="https://aurelienroyer.shinyapps.io/Seahors/"><em>SEAHORS</em></a> est une application web et un package R permettant de visualiser la distribution spatiale d’objets archéologiques. Comme indiqué <a href="#formater-des-données">ci dessus</a>, <em>SEAHORS</em> peut être employé pour importer, transformer, et transmettre un jeu de donnée à une instance en ligne d’<code>archeoViz</code>.</p>
</div>
</div>
<div id="paramètres-avancés" class="section level2">
<h2>Paramètres avancés</h2>
<p>La fonction <code>archeoViz()</code> admet de nombreux paramètres optionnels, relatifs aux:</p>
<ul>
<li>données à charger (traité <a href="#par-paramétrage-de-la-fonction">ci-dessus</a>),</li>
<li>contenu de la page d’accueil (traité <a href="#déployée">ci-dessus</a>),</li>
<li><a href="#carroyage">carroyage</a>,</li>
<li><a href="#pré-sélection-des-paramètres">pré-paramètrage</a> des paramètres pouvant être définis dans l’interface graphique,</li>
<li><a href="#affichage-réactif-des-visualisations">comportement réactif</a> de l’application à propos du calcul et de l’affichage des visualisations.</li>
<li><a href="#export-html">export HTML</a>.</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw">archeoViz</span>(<span class="dt">objects.df=</span><span class="ot">NULL</span>, <span class="dt">refits.df=</span><span class="ot">NULL</span>, <span class="dt">timeline.df=</span><span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">          <span class="dt">title=</span><span class="ot">NULL</span>, <span class="dt">home.text=</span><span class="ot">NULL</span>, <span class="dt">lang=</span><span class="st">&quot;en&quot;</span>, <span class="dt">set.theme=</span><span class="st">&quot;cosmo&quot;</span>,</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">          <span class="dt">square.size =</span> <span class="dv">100</span>, <span class="dt">rotation =</span> <span class="dv">0</span>, <span class="dt">grid.orientation =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb8-4" data-line-number="4">          <span class="dt">reverse.axis.values =</span> <span class="ot">NULL</span>, <span class="dt">reverse.square.names =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb8-5" data-line-number="5">          <span class="dt">add.x.square.labels =</span> <span class="ot">NULL</span>, <span class="dt">add.y.square.labels =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb8-6" data-line-number="6">          <span class="dt">class.variable =</span> <span class="ot">NULL</span>, <span class="dt">class.values =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb8-7" data-line-number="7">          <span class="dt">default.group =</span> <span class="st">&quot;by.layer&quot;</span>, <span class="dt">location.mode =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb8-8" data-line-number="8">          <span class="dt">map.z.val =</span> <span class="ot">NULL</span>, <span class="dt">map.density =</span> <span class="st">&quot;no&quot;</span>, <span class="dt">map.refits =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb8-9" data-line-number="9">          <span class="dt">plot3d.ratio =</span> <span class="dv">1</span>, <span class="dt">plot3d.hulls =</span> <span class="ot">FALSE</span>, <span class="dt">hulls.class.values =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb8-10" data-line-number="10">          <span class="dt">plot3d.surfaces =</span> <span class="ot">NULL</span>, <span class="dt">plot3d.refits =</span> <span class="ot">NULL</span>, <span class="dt">point.size =</span> <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb8-11" data-line-number="11">          <span class="dt">sectionX.x.val =</span> <span class="ot">NULL</span>, <span class="dt">sectionX.y.val =</span> <span class="ot">NULL</span>, <span class="dt">sectionX.refits =</span> <span class="ot">NULL</span>, </a>
<a class="sourceLine" id="cb8-12" data-line-number="12">          <span class="dt">sectionY.x.val =</span> <span class="ot">NULL</span>, <span class="dt">sectionY.y.val =</span> <span class="ot">NULL</span>, <span class="dt">sectionY.refits =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb8-13" data-line-number="13">          <span class="dt">camera.center =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>), <span class="dt">camera.eye =</span> <span class="kw">c</span>(<span class="fl">1.25</span>, <span class="fl">1.25</span>, <span class="fl">1.25</span>),</a>
<a class="sourceLine" id="cb8-14" data-line-number="14">          <span class="dt">run.plots =</span> <span class="ot">FALSE</span>, <span class="dt">html.export =</span> <span class="ot">TRUE</span>, <span class="dt">table.export =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb8-15" data-line-number="15">          )</a></code></pre></div>
<div id="carroyage" class="section level3">
<h3>Carroyage</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw">archeoViz</span>(<span class="dt">square.size =</span> <span class="dv">100</span>,</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">          <span class="dt">reverse.axis.values =</span> <span class="ot">NULL</span>, <span class="dt">reverse.square.names =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">          <span class="dt">add.x.square.labels =</span> <span class="ot">NULL</span>, <span class="dt">add.y.square.labels =</span> <span class="ot">NULL</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4">          )</a></code></pre></div>
<ul>
<li><strong>square.size</strong> : numérique. Taille (longueur et largeur) en centimètre des carrés du carroyage. La valeur par défaut est 100 cm.</li>
<li><strong>rotation</strong> : numérique. integer. Valeur (en degrés) pour la rotation à appliquer en plan au nuage de points.</li>
<li><strong>grid.orientation</strong> : numérique. Orientation (en degrés) du carroyage par rapport au nord.</li>
<li><strong>reverse.axis.values</strong> : caractères. Nom de l’axe ou des axes à inverser (une combinaison de ‘x’, ‘y’, ‘z’).</li>
<li><strong>reverse.square.names</strong> : caractères. Nom de l’axe ou des axes pour lesquels inverser l’ordre des labels de carrés (une combinaison de ‘x’, ‘y’, ‘z’).</li>
<li><strong>add.x.square.labels</strong> : caractères. Labels de carrés additionnels pour l’axe ‘x’.</li>
<li><strong>add.y.square.labels</strong> : caractères. Labels de carrés additionnels pour l’axe ‘y’.</li>
</ul>
</div>
<div id="pré-sélection-des-paramètres" class="section level3">
<h3>Pré-sélection des paramètres</h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw">archeoViz</span>(<span class="dt">class.variable =</span> <span class="ot">NULL</span>, <span class="dt">class.values =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">          <span class="dt">default.group =</span> <span class="st">&quot;by.layer&quot;</span>, <span class="dt">location.mode =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">          <span class="dt">map.z.val =</span> <span class="ot">NULL</span>, <span class="dt">map.density =</span> <span class="st">&quot;no&quot;</span>, <span class="dt">map.refits =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">          <span class="dt">plot3d.hulls =</span> <span class="ot">NULL</span>, <span class="dt">plot3d.surfaces =</span> <span class="ot">NULL</span>, <span class="dt">plot3d.refits =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb10-5" data-line-number="5">          <span class="dt">sectionX.x.val =</span> <span class="ot">NULL</span>, <span class="dt">sectionX.y.val =</span> <span class="ot">NULL</span>, <span class="dt">sectionX.refits =</span> <span class="ot">NULL</span>, </a>
<a class="sourceLine" id="cb10-6" data-line-number="6">          <span class="dt">sectionY.x.val =</span> <span class="ot">NULL</span>, <span class="dt">sectionY.y.val =</span> <span class="ot">NULL</span>, <span class="dt">sectionY.refits =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb10-7" data-line-number="7">          <span class="dt">camera.center =</span> <span class="ot">NULL</span>, <span class="dt">camera.eye =</span> <span class="ot">NULL</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8">          )</a></code></pre></div>
<ul>
<li><strong>class.variable</strong>: caractères. Au lancement de l’application, nom de la variable à pré-sélectionner.</li>
<li><strong>class.values</strong>: caractères. Au lancement de l’application, nom des valeurs à pré-sélectionner.</li>
<li><strong>default.group</strong>: caractères. Au lancement de l’application, pré-sélection de la variable à employer pour grouper les données (soit “by.layer” ou “by.variable”).</li>
<li><strong>location.mode</strong>: caractères. Au lancement de l’application, pré-sélection du ou des modes de localisation à afficher (une combinaison des valeurs possibles “exact”, “fuzzy”, “show.uncertainty”).</li>
<li><strong>map.z.val</strong>: numérique. Au lancement de l’application, valeurs minimale et maximale des coordonnées Z à présélectionner dans la visualisation en plan.</li>
<li><strong>map.density</strong>: caractères. Au lancement de l’application, calculer et afficher ou non les courbes de densité dans la visualisation en plan (soit “no”, “overall”, ou “by.variable”).</li>
<li><strong>map.refits</strong>: TRUE ou FALSE. Afficher ou non les remontages dans la visualisation en plan.</li>
<li><strong>plot3d.hulls</strong>: TRUE ou FALSE. Au lancement de l’application, calculer et afficher ou non les enveloppes convexes dans la visualisation 3D.</li>
<li><strong>hulls.class.values</strong>: caractères. Au lancement de l’application, noms des sous-ensembles de points pour lesquels calculer les enveloppes convexes.</li>
<li><strong>plot3d.surfaces</strong>: TRUE ou FALSE. Au lancement de l’application, calculer et afficher ou non les surfaces de régression dans la visualisation 3D.</li>
<li><strong>plot3d.refits</strong>: TRUE ou FALSE. Au lancement de l’application, afficher ou non les remontages dans la visualisation 3D.</li>
<li><strong>point.size</strong>: entier. Au lancement de l’application, taille des points dans les visualisations.</li>
<li><strong>sectionX.x.val</strong>: numérique. Au lancement de l’application, valeurs minimale et maximale des coordonnées X à présélectionner dans la visualisation en section X.</li>
<li><strong>sectionX.y.val</strong>: numérique. Au lancement de l’application, valeurs minimale et maximale des coordonnées Y à présélectionner dans la visualisation en section X.</li>
<li><strong>sectionX.refits</strong>: TRUE ou FALSE. Au lancement de l’application, afficher ou non les remontages dans la visualisation en section X.</li>
<li><strong>sectionY.x.val</strong>: numérique. Au lancement de l’application, valeurs minimale et maximale des coordonnées X à présélectionner dans la visualisation en section Y.</li>
<li><strong>sectionY.y.val</strong>: numérique. Au lancement de l’application, valeurs minimale et maximale des coordonnées Y à présélectionner dans la visualisation en section Y.</li>
<li><strong>sectionY.refits</strong>: TRUE ou FALSE. Au lancement de l’application, afficher ou non les remontages dans la visualisation en section Y.</li>
<li><strong>camera.center</strong>: numérique. Au lancement de l’application, coordonnées du point vers lequel la caméra est orientée dans la visualisation 3D (valeurs par défaut: x=0, y=0, z=0).</li>
<li><strong>camera.eye</strong>: numérique. Au lancement de l’application, coordonnées de la position de la caméra dans la visualisation 3D (valeurs par défaut: x=1.25, y=1.25, z=1.25).</li>
</ul>
</div>
<div id="affichage-réactif-des-visualisations" class="section level3">
<h3>Affichage réactif des visualisations</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw">archeoViz</span>(<span class="dt">run.plots =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<ul>
<li><strong>run.plots</strong>: TRUE ou FALSE. Si les visualisations doivent, ou non, être immédiatement calculées et affichées (sans nécessiter de cliquer sur le bouton “Rafraîchir”).</li>
</ul>
</div>
<div id="contrôle-des-formats-dexport" class="section level3">
<h3>Contrôle des formats d’export</h3>
<ul>
<li><strong>html.export</strong>: TRUE ou FALSE. Afficher ou non les boutons permettant d’exporter les visualisations en format HTML interactif.</li>
<li><strong>table.export</strong>: TRUE ou FALSE. Permettre ou non le transfert des données à des <a href="#exports-depuis-et-vers-des-applications-tierces">applications tierces</a> dans l’onglet “Statistiques”.</li>
</ul>
</div>
<div id="paramètres-url" class="section level3">
<h3>Paramètres URL</h3>
<p>Une instance <code>archeoViz</code> deployée en ligne sur un serveur peut être paramétrée en ajustant les paramètres de l’URL. Les paramètres supportés comprennent:</p>
<ul>
<li><code>objects.df</code>, <code>refits.df</code>, <code>timeline.df</code></li>
<li><code>title</code>, <code>home.text</code></li>
<li><code>reverse.axis.values</code>, <code>reverse.square.names</code></li>
<li><code>square.size</code></li>
<li><code>add.x.square.labels</code>, <code>add.y.square.labels</code></li>
<li><code>class.variable</code>, <code>class.values</code></li>
<li><code>default.group</code></li>
<li><code>location.mode</code></li>
<li><code>map.density</code>, <code>map.refits</code></li>
<li><code>plot3d.hulls</code>, <code>plot3d.surfaces</code>, <code>plot3d.refits</code></li>
<li><code>sectionX.refits</code></li>
<li><code>sectionY.refits</code></li>
<li><code>run.plots</code></li>
</ul>
<p>(Les paramètres suivants ne sont pas supportés dans la version actuelle de l’application: <code>map.z.val</code>, <code>sectionX.x.val</code>, <code>sectionX.y.val</code>, <code>sectionY.x.val</code>, <code>sectionY.y.val</code>, <code>point.size</code>, <code>lang</code>, <code>set.theme</code>, <code>camera.center</code>, <code>camera.eye</code>, <code>html.export</code>, <code>table.export</code>.)</p>
<p>Les paramètres doivent être écris en respectant la syntaxe URL (?param1=value&amp;param2=value2) et avoir le même type de valeurs que dans leur usage dans l’interface R. Par exemple, l’URL suivante lance une instance <code>archeoViz</code> à partir du tableau principal du jeu de données <a href="https://zenodo.org/record/8003880">Bilzingsleben</a>:</p>
<p><a href="https://analytics.huma-num.fr/archeoviz/en/?objects.df=https://zenodo.org/record/8003880/files/bilzingsleben.csv" class="uri">https://analytics.huma-num.fr/archeoviz/en/?objects.df=https://zenodo.org/record/8003880/files/bilzingsleben.csv</a></p>
<p>Cette URL fait de même, mais inclut également le tableau des remontages (paramètre <code>&amp;refits.df=</code>) et active l’affichage immédiat des relations de remontage dans le graphique 3D et le plan:</p>
<p><a href="https://analytics.huma-num.fr/archeoviz/en/?map.refits=TRUE&amp;plot3d.refits=TRUE&amp;objects.df=https://zenodo.org/record/8003880/files/bilzingsleben.csv&amp;refits.df=https://zenodo.org/record/8003880/files/bilzingsleben-antlers-refits.csv" class="uri">https://analytics.huma-num.fr/archeoviz/en/?map.refits=TRUE&amp;plot3d.refits=TRUE&amp;objects.df=https://zenodo.org/record/8003880/files/bilzingsleben.csv&amp;refits.df=https://zenodo.org/record/8003880/files/bilzingsleben-antlers-refits.csv</a></p>
<p>L’URL suivante lance le jeu de données Bilzingsleben, en pré-réglant l’application telle que:</p>
<ol style="list-style-type: decimal">
<li>les points sont groupés par variable (paramètre <code>default.group</code>, avec la valeur <code>by.variable</code> plutôt que <code>by.layer</code>)</li>
<li>ne sélectionne que les “Antlers” (paramètre <code>class.values</code>)</li>
<li>redéfini la taille des carrés du carroyage (paramètre <code>square.size</code> 500 cm au lieu de la valeur par défaut 100cm)</li>
<li>active l’affichage immédiat des graphiques (paramètre <code>run.plots</code>)</li>
<li>modifie le titre de la page (paramètre <code>title</code>)</li>
<li>modifie le contenu de la page d’accueil, illustrant l’usage d’un simple balisage HTML (paramètre <code>home.txt</code>)</li>
</ol>
<p><a href="https://analytics.huma-num.fr/archeoviz/en/?default.group=by.variable&amp;class.values=Antler&amp;square.size=500&amp;run.plots=TRUE&amp;title=Anters%20at%20Bilzingsleben&amp;home.text=Many%20%3Cb%3Eantlers%3C/b%3E&amp;objects.df=https://zenodo.org/record/8003880/files/bilzingsleben.csv">https://analytics.huma-num.fr/archeoviz/en/?default.group=by.variable&amp;class.values=Antler&amp;square.size=500&amp;run.plots=TRUE&amp;title=Antlers%20at%20Bilzingsleben&amp;home.text=Many%20<b>antlers</b>&amp;objects.df=https://zenodo.org/record/8003880/files/bilzingsleben.csv</a></p>
<p>À noter que les paramètres <code>add.x.square.labels</code>, <code>add.y.square.labels</code>, <code>location.mode</code>, et <code>class.values</code>, qui admettent des valeurs simples ou multiples dans l’interface R (par ex. c(“value1”, “value2”)) n’admettent qu’une seule valeur lorsqu’employé comme paramètre d’URL (il s’agit d’une restriction liée à la syntaxe URL).</p>
</div>
</div>
</div>
<div id="remerciements" class="section level1">
<h1>Remerciements</h1>
<p>L’application et le package <code>archeoViz</code> sont développés et maintenus par Sébastien Plutniak. Arthur Coulon, Solène Denis, Olivier Marlet, et Thomas Perrin ont testé et soutenu ce projet durant ses premières étapes. Renata Araujo, Laura Coltofean, Sara Giardino, Julian Laabs et Nicolas Delsol ont traduit l’application respectivement en portugais, roumain, italien, allemand, et espagnol.</p>
</div>
<div id="références-et-ressources" class="section level1">
<h1>Références et ressources</h1>
<div id="logiciels" class="section level2">
<h2>Logiciels</h2>
<ul>
<li>Plutniak, Sébastien, Renata Araujo, Laura Coltofean, Nicolas Delsol, Sara Giardino, Julian Laabs. 2024. “archeoViz. Visualisation, Exploration, and Web Communication of Archaeological Spatial Data”. v1.3.4, DOI: <a href="https://doi.org/10.5281/zenodo.7460193">10.5281/zenodo.7460193</a>.</li>
<li>Plutniak, Sébastien, Anaïs Vignoles. 2023. “<a href="https://hal.science/hal-04156271">The archeoViz Portal: Dissemination of Spatial Archaeological Datasets</a>”, portail web, <a href="https://analytics.huma-num.fr/archeoviz/home" class="uri">https://analytics.huma-num.fr/archeoviz/home</a>.</li>
</ul>
</div>
<div id="articles" class="section level2">
<h2>Articles</h2>
<ul>
<li>Plutniak, Sébastien. 2023. “archeoViz: an R package for the Visualisation, Exploration, and Web Communication of Archaeological Spatial Data”. <em>Journal of Open Source Software</em>, 92(8), 5811, DOI: <a href="https://doi.org/10.21105/joss.05811">10.21105/joss.05811</a>.</li>
<li>Plutniak, Sébastien. 2023. “<a href="https://www.prehistoire.org/offres/doc_inline_src/515/0-BSPF_2023_1_2e_partie_Correspondance_PLUTNIAK.pdf">Visualiser et explorer la distribution spatiale du mobilier archéologique : l’application archeoViz et son portail web</a>”. <em>Bulletin de la Société préhistorique française</em>, 120(1), p. 70-74.</li>
</ul>
</div>
<div id="présentations" class="section level2">
<h2>Présentations</h2>
<ul>
<li>Plutniak, Sébastien. 2023. “<a href="https://hal.science/hal-04146410">Fostering the Publication of Spatial Archaeological Data: a Decentralized Approach. The archeoViz Web Application and its Portal</a>”, support d’une présentation à l’University of Florida, Gainesville.</li>
<li>Plutniak, Sébastien, Anaïs Vignoles. 2023. “<a href="https://hal.science/hal-04070444">L’application web / package archeoViz et son portail web. Une solution décentralisée d’éditorialisation de données archéologiques spatialisées</a>, support d’une présentation à l’atelier SITRADA, Paris.</li>
</ul>
</div>
<div id="sites-web" class="section level2">
<h2>Sites web</h2>
<ul>
<li>Le blog <em>archeoViz. Data visualization in archaeology. Re-use, visualization, dissemination of spatial data</em>: <a href="https://archeoviz.hypotheses.org" class="uri">https://archeoviz.hypotheses.org</a></li>
</ul>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
